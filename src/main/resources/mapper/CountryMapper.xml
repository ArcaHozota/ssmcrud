<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="jp.co.toshiba.ppok.mapper.CountryMapper">
	<resultMap id="BaseResultMap"
		type="jp.co.toshiba.ppok.entity.Country" autoMapping="true">
		<id column="CODE" jdbcType="NCHAR" property="code" />
	</resultMap>
	<select id="getAllContinents" resultType="java.lang.String">
		SELECT
		    CTY.CONTINENT 
		FROM
		    WORLD_COUNTRY CTY 
		WHERE
		    NOT EXISTS ( 
		        SELECT
		            1 
		        FROM
		            WORLD_COUNTRY CTN 
		        WHERE
		            CTN.CONTINENT = CTY.CONTINENT 
		            AND CTN.CODE > CTY.CODE
		    ) 
		ORDER BY
		    CTY.CONTINENT
	</select>
	<select id="getNationsByCnt" parameterType="java.lang.String"
		resultType="java.lang.String">
		SELECT
		    CTY.NAME
		FROM
		    WORLD_COUNTRY CTY
		WHERE
		    CTY.CONTINENT = #{continent,jdbcType=NVARCHAR}
		ORDER BY
		    CTY.NAME
	</select>
	<select id="getNationCode" parameterType="java.lang.String"
		resultType="java.lang.String">
		SELECT
		    CTY.CODE
		FROM
		    WORLD_COUNTRY CTY
		WHERE
		    CTY.NAME = #{name,jdbcType=NVARCHAR}
	</select>
</mapper>